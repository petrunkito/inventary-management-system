@page "/categories"
@rendermode InteractiveServer

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="px-5 pt-5"> 
    <MudGrid Justify="Justify.SpaceBetween" > 
        <MudItem>
            <MudText Typo="Typo.h4">Categorías</MudText>
        </MudItem>
        <MudItem>
            <MudButton @onclick="CreateCategory" Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add">
                Agregar
            </MudButton>
        </MudItem>
    </MudGrid>

    <MudPaper Class="mt-4 pa-4">
        
         <MudDataGrid  Items="@categories" Filterable="false" SortMode="@SortMode.None" Groupable="false">
            <Columns>
            
                <PropertyColumn Property="x => x.Title" Title="Título"/>
                <PropertyColumn Property="x => x.Description" Title="Descripción"/>
                <PropertyColumn Property=@(x => x.IsActive?"Activo":"Desactivado")  Title="Estado"/>
                <TemplateColumn  CellClass="d-flex justify-start" Title="Acción"  >
                    <CellTemplate Context="context">
                        <MudStack Row>
                            <MudIconButton  @onclick="(()=>EditCategory(context.Item.Id))"  Icon="@Icons.Material.Filled.Edit" Color="Color.Tertiary" aria-label="delete2" />

                            @if(context.Item.IsActive)
                            {
                                <MudIconButton @onclick="(()=>DeactiveAndActivateCategory(context.Item.Id))" Icon="@Icons.Material.Filled.PanoramaFishEye" Color="Color.Default" aria-label="hide" />
                            }else{
                                <MudIconButton @onclick="(()=>DeactiveAndActivateCategory(context.Item.Id))" Icon="@Icons.Material.Filled.HideSource" Color="Color.Error" aria-label="active" />

                            }
                        </MudStack>
                    </CellTemplate>
                </TemplateColumn>
            </Columns>
        </MudDataGrid> 

    </MudPaper> 
</MudContainer>



