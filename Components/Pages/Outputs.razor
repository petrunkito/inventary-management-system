@page "/outputs"
@rendermode InteractiveServer
@using System.Globalization


 <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="px-5 pt-5"> 
    <MudGrid Justify="Justify.SpaceBetween" > 
        <MudItem>
            <MudText Typo="Typo.h4">Salidas</MudText>
        </MudItem>
        <MudItem>
            <MudButton @onclick="(() => CreateOutputProduct())" Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add">
                Agregar
            </MudButton>
        </MudItem>
    </MudGrid>

    <MudPaper Class="mt-4 pa-4">
        
         <MudDataGrid  Items="@outputs" Filterable="false" SortMode="@SortMode.None" Groupable="false">
            <Columns>
            
                <PropertyColumn Property="x => x.CustomerName" Title="Cliente"  />
                <PropertyColumn Property="x => x.Amount" Title="Cantidad pedida"  />
                <PropertyColumn Property="x => x.TypeOutput" Title="Tipo de salida"  />
                <PropertyColumn Property="x => x.Total" Title="Total"  />
                <PropertyColumn Property="@(x => x.CreatedAt.ToString($"dd \\de MMMM \\del yyyy", new CultureInfo("es-ES")))" Title="Fecha"  />
                <PropertyColumn Property="@(x => x.IsActive?"Activo":"Anulado")"  Title="Estado"/>

                 <TemplateColumn  CellClass=" " Title="AcciÃ³n"  >
                    <CellTemplate Context="context">
                        <MudStack Row  AlignItems="AlignItems.Center" Spacing="1">
                            
                            @if(context.Item.IsActive)
                            {
                                <MudIconButton @onclick="(()=>DeactiveOutputProduct(context.Item.ProductOutputId))" Icon="@Icons.Material.Filled.PanoramaFishEye" Color="Color.Default" aria-label="hide" />
                            }else{
                                <MudIconButton Icon="@Icons.Material.Filled.HideSource" Color="Color.Error" aria-label="active" />
                            }
                        </MudStack>
                    </CellTemplate>
                </TemplateColumn> 
            </Columns>
        </MudDataGrid> 

    </MudPaper> 
</MudContainer>


 


